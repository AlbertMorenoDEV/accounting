#!/usr/bin/env php
<?php

// app config
$config = require_once dirname(__DIR__).'/config/ini.php';

// app start
require_once dirname(__DIR__).'/config/bootstrap.php';

use Symfony\Component\Console\Application;

use accounting\clients\cli\commands\ChangeAccountNameCommand;

// According repositories configured persistence type
$name = "accounting\\infrastructure\\persistence\\".$config['persistenceType']."AccountRepository";
$accountRepository = new $name($config['conexion']);

// Ids generator set
$name = "accounting\\infrastructure\\ids\\Account".$config['idsType'];
$idAccountGenerator = new $name;

$application = new Application();
$application->add(new ChangeAccountNameCommand($accountRepository, $idAccountGenerator));
$application->run();